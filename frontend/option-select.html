<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Choose Your Preferences</title>
  <link rel="stylesheet" href="css/style.css">
  <script type="module" src="js/firebase.js"></script>
  <style>
    body {
      padding: 20px;
    }
    
    .option-container {
      max-width: 500px;
      margin: 0 auto;
    }
    
    .progress-bar {
      display: flex;
      gap: 10px;
      margin-bottom: 40px;
    }
    
    .progress-step {
      flex: 1;
      height: 4px;
      background: var(--border-color);
      border-radius: 2px;
      transition: all 0.3s;
    }
    
    .progress-step.active {
      background: var(--accent-yellow);
    }
    
    .step-title {
      text-align: center;
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .question {
      text-align: center;
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 40px;
      line-height: 1.3;
    }
    
    .options-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .option-card {
      background: var(--bg-card);
      border: 3px solid var(--border-color);
      border-radius: 20px;
      padding: 30px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }
    
    .option-card:hover {
      border-color: var(--accent-yellow);
      transform: translateY(-5px);
    }
    
    .option-card.selected {
      border-color: var(--accent-yellow);
      background: var(--bg-darker);
    }
    
    .option-icon {
      font-size: 60px;
      margin-bottom: 15px;
    }
    
    .option-label {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .next-btn {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: calc(100% - 40px);
      max-width: 460px;
    }
  </style>
</head>
<body>
  <div class="option-container">
    <div class="progress-bar">
      <div class="progress-step active" id="step1"></div>
      <div class="progress-step" id="step2"></div>
    </div>
    
    <div class="step-title" id="stepTitle">step 1 of 2</div>
    
    <h1 class="question" id="question">which food do you prefer?</h1>
    
    <div class="options-grid" id="optionsGrid">
      <!-- ÏòµÏÖòÎì§Ïù¥ Ïó¨Í∏∞Ïóê Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
    </div>
    
    <button class="next-btn" id="nextBtn" onclick="nextStep()" disabled>
      next
    </button>
  </div>
  
  <script src="js/common.js"></script>
  <script>
    let currentStep = 1;
    let selections = {
      food: null,
      art: null
    };
    
    const steps = [
      {
        question: "which food do you prefer?",
        type: 'food',
        options: [
          { id: 'pizza', icon: 'üçï', label: 'Pizza' },
          { id: 'sushi', icon: 'üç£', label: 'Sushi' },
          { id: 'pasta', icon: 'üçù', label: 'Pasta' }
        ]
      },
      {
        question: "which art style resonates with you?",
        type: 'art',
        options: [
          { id: 'abstract', icon: 'üé®', label: 'Abstract' },
          { id: 'classical', icon: 'üñºÔ∏è', label: 'Classical' },
          { id: 'modern', icon: '‚ú®', label: 'Modern' }
        ]
      }
    ];
    
    // Ï¥àÍ∏∞ Î†åÎçîÎßÅ
    renderStep(0);
    
    function renderStep(stepIndex) {
      const step = steps[stepIndex];
      
      document.getElementById('stepTitle').textContent = `step ${stepIndex + 1} of 2`;
      document.getElementById('question').textContent = step.question;
      
      const optionsGrid = document.getElementById('optionsGrid');
      optionsGrid.innerHTML = step.options.map(option => `
        <div class="option-card" onclick="selectOption('${step.type}', '${option.id}')">
          <div class="option-icon">${option.icon}</div>
          <div class="option-label">${option.label}</div>
        </div>
      `).join('');
      
      // ÏßÑÌñâ Î∞î ÏóÖÎç∞Ïù¥Ìä∏
      document.getElementById('step1').classList.toggle('active', stepIndex >= 0);
      document.getElementById('step2').classList.toggle('active', stepIndex >= 1);
      
      // Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
      document.getElementById('nextBtn').disabled = true;
    }
    
    function selectOption(type, optionId) {
      selections[type] = optionId;
      
      // ÏÑ†ÌÉù ÌëúÏãú
      document.querySelectorAll('.option-card').forEach(card => {
        card.classList.remove('selected');
      });
      event.currentTarget.classList.add('selected');
      
      // Î≤ÑÌäº ÌôúÏÑ±Ìôî
      document.getElementById('nextBtn').disabled = false;
    }
    
    function nextStep() {
      if (currentStep === 1) {
        // 2Îã®Í≥ÑÎ°ú
        currentStep = 2;
        renderStep(1);
      } else {
        // ÏôÑÎ£å - ÏùåÏÑ± ÏÑ∏ÏÖòÏúºÎ°ú
        saveToLocal('session_options', selections);
        navigateTo('voice-chat.html');
      }
    }
  </script>
</body>
</html>